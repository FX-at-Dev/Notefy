<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notefy - Web-Based Notes Making and Sharing Application</title>
  <link rel="stylesheet" href="/Frontend/css/style.css" />
</head>
<body>
  <main class="centered">
    <div class="card">
      <h2>Import PDF or PPTX</h2>
      <form id="import-form" class="form">
        <input id="file" type="file" accept=".pdf,.pptx" required />
        <label>
          <input id="opt-ocr" type="checkbox" /> Run OCR (for scanned PDFs)
        </label>
        <select id="import-mode">
          <option value="single">Single note</option>
          <option value="pages">One note per page/slide</option>
          <option value="slides">Slides mode (--- separators)</option>
        </select>

        <div class="row">
          <button type="submit" class="btn">Start Import</button>
          <a href="/editor.html" class="btn ghost">Back</a>
        </div>
      </form>

      <div id="import-status" style="margin-top:12px"></div>
    </div>
  </main>

  <script type="module" src="/js/import.js"></script>
  <script type="module">
    // in import.html - when user clicks "Import into editor" or Confirm
function sendToEditor(title, text) {
  // If both pages are served from the same origin this will work as is.
  // If import.html is on a different origin, replace '*' with the editor origin
  // and check ev.origin in the editor for security.
  window.parent.postMessage({ type: 'imported-file', title: title, text: text }, '*');
}

// Example wiring inside import.html
document.getElementById('import-into-editor')?.addEventListener('click', () => {
  const title = document.getElementById('import-title')?.value || '';
  const text = window.currentlyLoadedFileText || ''; // your import page should set this variable when it reads a file
  sendToEditor(title, text);
});

  </script>
</body>
</html>
